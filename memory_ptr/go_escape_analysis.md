
# Escape-–∞–Ω–∞–ª–∏–∑ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ Go

Escape-–∞–Ω–∞–ª–∏–∑ (escape analysis) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Go, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –≥–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–∏ –≥–¥–µ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –∂–∏—Ç—å –≤ –ø–∞–º—è—Ç–∏.
* Go —Ä–µ—à–∞–µ—Ç, –¥–æ–ª–∂–Ω–∞ –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∂–∏—Ç—å –Ω–∞ —Å—Ç–µ–∫–µ –∏–ª–∏ –≤ –∫—É—á–µ.
* –°—Ç–µ–∫ ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø–∞–º—è—Ç—å, –æ—á–∏—â–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏.
* –ö—É—á–∞ ‚Äî –ø–∞–º—è—Ç—å –¥–ª—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤, —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞ (garbage collection).

üîπ –ü—Ä–∏–º–µ—Ä
```go
func f() *int {
x := 42     // —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
return &x   // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
}
```
* x ‚Äú—É–±–µ–≥–∞–µ—Ç‚Äù –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ—ë –∞–¥—Ä–µ—Å.
* –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–µ–ª–∞–µ—Ç escape-–∞–Ω–∞–ª–∏–∑ –∏ –ø–æ–Ω–∏–º–∞–µ—Ç: x –¥–æ–ª–∂–Ω–∞ –∂–∏—Ç—å –≤ –∫—É—á–µ, –∏–Ω–∞—á–µ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
  –∞–¥—Ä–µ—Å —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º.

## **üß±–°—Ç–µ–∫**
**–°—Ç–µ–∫** ‚Äî —ç—Ç–æ –±—ã—Å—Ç—Ä–∞—è –ø–∞–º—è—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É LIFO (Last In, First Out):
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–∑–æ–≤–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–π.
* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–µ–∫–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏.
* –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, –Ω–æ —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω.
```go
// –ö–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è f –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, –ø–∞–º—è—Ç—å –¥–ª—è x –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–µ–Ω–∞.
func f() {
    x := 10 // x —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Å—Ç–µ–∫–µ
}
```
üìä **–†–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –∏ –µ–≥–æ –≤–ª–∏—è–Ω–∏–µ**
| –ü–∞—Ä–∞–º–µ—Ç—Ä                    | üü¶ –ú–∞–ª–µ–Ω—å–∫–∏–π —Å—Ç–µ–∫       | üü¶ –ë–æ–ª—å—à–æ–π —Å—Ç–µ–∫                         |
| --------------------------- | ----------------------- | --------------------------------------- |
| **–ù–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**        | ‚ö° ~2 KB                 | üèãÔ∏è‚Äç‚ôÇÔ∏è –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç           |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**    | üíæ —ç–∫–æ–Ω–æ–º–Ω–æ             | üí∞ –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏               |
| **–†–∏—Å–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç–µ–∫–∞** | ‚ö†Ô∏è –≤—ã—Å–æ–∫–∏–π              | ‚úÖ –º–µ–Ω—å—à–µ —Ä–∏—Å–∫–∞                          |
| **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–æ—Å—Ç**       | üìà —Ä–∞—Å—Ç—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | üìà —Ä–∞—Å—Ç—ë—Ç —Ç–æ–∂–µ, –Ω–æ –±–æ–ª—å—à–µ —Ä–∞—Å—Ö–æ–¥ –ø–∞–º—è—Ç–∏ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**      | üöÄ –±—ã—Å—Ç—Ä–æ               | üê¢ –Ω–µ–º–Ω–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –ø—Ä–∏ —Ä–æ—Å—Ç–µ          |

## **üèîÔ∏è –ö—É—á–∞**
**–ö—É—á–∞** ‚Äî —ç—Ç–æ –ø–∞–º—è—Ç—å –¥–ª—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∂–∏—Ç—å –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ —Ñ—É–Ω–∫—Ü–∏–∏:
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, ‚Äú—É–±–µ–≥–∞—é—â–∏—Ö‚Äù –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–≤, –¥–æ—Å—Ç—É–ø –∫ –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω
  –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º—ã.
* –î–æ—Å—Ç—É–ø –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –∫ —Å—Ç–µ–∫—É, –∏ –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ (GC).
```go
// –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è x –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏.
func f() *int {
    x := 42
    return &x // x ‚Äú—É–±–µ–≥–∞–µ—Ç‚Äù –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Üí –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –∫—É—á—É
}
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
| –°–≤–æ–π—Å—Ç–≤–æ / –ü–æ–Ω—è—Ç–∏–µ   | –°—Ç–µ–∫ üü¶                             | –ö—É—á–∞ üü©                                                         |
| -------------------- | ----------------------------------- | --------------------------------------------------------------- |
| **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**       | –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ      | –î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –æ–±—ä–µ–∫—Ç—ã, ‚Äú—É–±–µ–≥–∞—é—â–∏–µ‚Äù –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ                    |
| **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª**   | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ | –ñ–∏–≤—ë—Ç –ø–æ–∫–∞ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏, GC –æ—á–∏—â–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–µ –æ–±—ä–µ–∫—Ç—ã         |
| **–°–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞** | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è                       | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–±–æ—Ç—ã GC                                 |
| **–†–∞–∑–º–µ—Ä**           | –ú–∞–ª—ã–π, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π                 | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π, —Ä–∞—Å—Ç—ë—Ç –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏                           |
| **–ü—Ä–∏–º–µ—Ä—ã –æ–±—ä–µ–∫—Ç–æ–≤** | –õ–æ–∫–∞–ª—å–Ω—ã–µ int, string, struct       | –°—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–∞—Ä—Ç—ã, —Å—Ä–µ–∑—ã, –æ–±—ä–µ–∫—Ç—ã —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏                  |
| **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**      | –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞, –Ω–µ—Ç GC                 | GC —É–¥–∞–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–µ –æ–±—ä–µ–∫—Ç—ã;<br/> —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ |
| **–°—Å—ã–ª–∫–∏ / —Ü–∏–∫–ª—ã**   | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é            | –û–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ (—Ü–∏–∫–ª—ã)                   |

## 2Ô∏è‚É£ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞–µ—Ç Go

1. –°—Ç–µ–∫ –ø—Ä–æ—Ç–∏–≤ –∫—É—á–∏
    * –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ —É–±–µ–≥–∞–µ—Ç (doesn‚Äôt escape), –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∫–ª–∞–¥—ë—Ç –µ—ë –Ω–∞ —Å—Ç–µ–∫ ‚Üí –±—ã—Å—Ç—Ä–µ–µ, –±–µ–∑ GC.
    * –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É–±–µ–≥–∞–µ—Ç (escapes), –∫–ª–∞–¥—ë—Ç –µ—ë –≤ –∫—É—á—É ‚Üí –±–µ–∑–æ–ø–∞—Å–Ω–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ.

2. –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –∫–æ–ø–∏–π
    * –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω –≤–∏–¥–∏—Ç, —á—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Å—ã–ª–∫–∏.

3. –ò–Ω–ª–∞–π–Ω–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π
    * –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä—è–º–æ –≤ –≤—ã–∑–æ–≤, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∏ —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
      –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–µ–∫–µ.

## 3Ô∏è‚É£ –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ
1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –º–µ–Ω—å—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –∫—É—á–µ ‚Üí –º–µ–Ω—å—à–µ —Ä–∞–±–æ—Ç—ã —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞ ‚Üí –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—ã—Å—Ç—Ä–µ–µ.
2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞.
3. –ü–æ–Ω–∏–º–∞–Ω–∏–µ escape-–∞–Ω–∞–ª–∏–∑a –ø–æ–º–æ–≥–∞–µ—Ç –ø–∏—Å–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥: –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚Äú—É–±–µ–≥–∞—é—â–∏—Ö‚Äù –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

## –ë–µ–Ω—á–º–∞—Ä–∫–∏

**–ë–µ–Ω—á–º–∞—Ä–∫ (benchmark)** ‚Äî —ç—Ç–æ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–º–µ—Ä—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
–∏–ª–∏ —Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
* –í Go –±–µ–Ω—á–º–∞—Ä–∫–∏ –æ–±—ã—á–Ω–æ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∞—è –±—ã—Å—Ç—Ä–µ–µ
  –∏–ª–∏ —ç–∫–æ–Ω–æ–º–∏—á–Ω–µ–µ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç –ø–∞–º—è—Ç—å.
* Go –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–∞–∫–µ—Ç testing, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
  –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π.

````go
package main

import (
    "testing"
)

// b.N ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è Go, —á—Ç–æ–±—ã –∏–∑–º–µ—Ä–µ–Ω–∏–µ –±—ã–ª–æ —Ç–æ—á–Ω—ã–º.
// Go –∑–∞–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤—ã–≤–æ–¥–∏—Ç —Å—Ä–µ–¥–Ω–µ–µ –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é.
func BenchmarkSumInt(b *testing.B) {
    nums := []int{1, 2, 3, 4, 5}
    for i := 0; i < b.N; i++ {   // b.N ‚Äî —á–∏—Å–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–π
        sum := 0
        for _, v := range nums {
            sum += v
        }
        _ = sum
    }
}
````
–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π: ``go test -bench=``

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –±–µ–Ω—á–º–∞—Ä–∫–∏
* –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –ø—Ä–æ–≤–µ—Ä–∫–∞, –∫–∞–∫–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –±—ã—Å—Ç—Ä–µ–µ.
* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞: –Ω–∞–π—Ç–∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞, –≥–¥–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—Ä–∞—Ç–∏—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
* –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–µ–≥—Ä–µ—Å—Å–∏–π: –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∏–ª–∞—Å—å.

### –ü—Ä–∏–º–µ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö —Ñ—É–Ω–∫—Ü–∏–π
```go
package main

import (
	"testing" // –ø–∞–∫–µ—Ç –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤
)

// SumLoop ‚Äî —Ñ—É–Ω–∫—Ü–∏—è —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ä–µ–∑–∞ —á–µ—Ä–µ–∑ —Ü–∏–∫–ª
func SumLoop(nums []int) int {
	sum := 0                  // —Å–æ–∑–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å—É–º–º—ã
	for _, v := range nums {   // –ø—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å—Ä–µ–∑–∞
		sum += v              // –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –∫ —Å—É–º–º–µ
	}
	return sum                // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
}

// SumRecursive ‚Äî —Ñ—É–Ω–∫—Ü–∏—è —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ä–µ–∑–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
func SumRecursive(nums []int) int {
	if len(nums) == 0 {       // –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π: –ø—É—Å—Ç–æ–π —Å—Ä–µ–∑
		return 0
	}
	// —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å–∫–ª–∞–¥—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏ —Å—É–º–º—É –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
	return nums[0] + SumRecursive(nums[1:])
}

// BenchmarkSumLoop ‚Äî –±–µ–Ω—á–º–∞—Ä–∫ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ SumLoop
func BenchmarkSumLoop(b *testing.B) {
	nums := make([]int, 1000)   // —Å–æ–∑–¥–∞—ë–º —Å—Ä–µ–∑ –∏–∑ 1000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
	for i := 0; i < b.N; i++ {  // b.N ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è
		_ = SumLoop(nums)        // –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
	}
}

// BenchmarkSumRecursive ‚Äî –±–µ–Ω—á–º–∞—Ä–∫ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ SumRecursive
func BenchmarkSumRecursive(b *testing.B) {
	nums := make([]int, 1000)   // —Å–æ–∑–¥–∞—ë–º —Å—Ä–µ–∑ –∏–∑ 1000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
	for i := 0; i < b.N; i++ {  // b.N ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π
		_ = SumRecursive(nums)   // –≤—ã–∑—ã–≤–∞–µ–º —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
	}
}

```
–ü—Ä–∏–º–µ—Ä–Ω—ã–π –≤—ã–≤–æ–¥:
```text
goos: linux
goarch: amd64
pkg: example/benchmark
BenchmarkSumLoop-8          500000          2500 ns/op
BenchmarkSumRecursive-8      50000         30000 ns/op
PASS
ok      example/benchmark    3.42s

```